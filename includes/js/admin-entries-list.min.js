/**
 * Custom js script at post edit screen
 *
 * @package   GravityView
 * @license   GPL2+
 * @author    Katz Web Services, Inc.
 * @link      http://gravityview.co
 * @copyright Copyright 2014, Katz Web Services, Inc.
 *
 * @since 1.0.0
 */
!function($){function e(e,t,a){o(a,!0);var l=$('<div class="message '+t+'" style="display:none;"><p>'+e+"</p></div>");$(l).prependTo(a).slideDown(),"updated"==t&&(messageTimeout=setTimeout(function(){o(a,!1)},1e4))}function o(e,o){var t=$(e).find(".message");o?$(t).remove():$(t).slideUp(function(){$(this).remove()})}function t(e,o,t){var a={action:"gv_update_approved",entry_id:e,form_id:gvGlobals.form_id,approved:o,nonce:gvGlobals.nonce};return $.post(ajaxurl,a,function(e){e&&t.removeClass("loading").toggleClass("entry_approved","Approved"===o)}),!0}$(document).ready(function(){$("#bulk_action, #bulk_action2").append('<optgroup label="GravityView"><option value="approve-'+gvGlobals.form_id+'">'+gvGlobals.label_approve+'</option><option value="unapprove-'+gvGlobals.form_id+'">'+gvGlobals.label_disapprove+"</option></optgroup>"),gvGlobals.bulk_message.length>0&&e(gvGlobals.bulk_message,"updated","#lead_form"),$("thead th.check-column:eq(1), tfoot th.check-column:eq(1)").after('<th scope="col" class="manage-column column-cb check-column gv-approve-column"><a href="'+gvGlobals.column_link+'" title="'+gvGlobals.column_title+'"></a></th>'),$('td:has(img[src*="star"])').after('<td class="gv-approve-column"><a href="#" class="toggleApproved" title="'+gvGlobals.approve_title+'"></a></td>'),$("tr:has(input.entry_approved)").find("a.toggleApproved").addClass("entry_approved").prop("title",gvGlobals.unapprove_title),$(".toggleApproved").click(function(e){e.preventDefault();var o=$(this).parent().parent().find('th input[type="checkbox"]').val();return $(this).addClass("loading"),$(this).hasClass("entry_approved")?($(this).prop("title",gvGlobals.approve_title),t(o,0,$(this))):($(this).prop("title",gvGlobals.unapprove_title),t(o,"Approved",$(this))),!1})})}(jQuery);