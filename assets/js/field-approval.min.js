!function($){"use strict";var self={response:{status:""},debug:!1,dt_selector:".gv-datatables",css_classes:{approved:"gv-approval-approved",loading:"gv-approval-loading"},selector:".gv-approval-toggle"};$(function(){self.setup_triggers()}),self.setup_triggers=function(){var maybeDT=$(self.dt_selector);maybeDT.length>0?$(".gv-datatables").on("draw.dt",self.add_toggle_approval_trigger):self.add_toggle_approval_trigger()},self.add_toggle_approval_trigger=function(){$(self.selector).on("click",function(e){self.toggle_approval(e)})},self.toggle_approval=function(e){e.preventDefault();var entry_id=$(e.target).attr("data-entry-id"),form_id=$(e.target).attr("data-form-id"),is_approved=$(e.target).attr("data-approved-status").toString(),set_approved=""===is_approved||"0"===is_approved?"Approved":"0";return self.debug&&console.log("toggle_approval",{target:e.target,is_approved:is_approved}),$(e.target).addClass(self.css_classes.loading),self.update_approval(entry_id,form_id,set_approved,$(e.target)),!1},self.update_approval=function(entry_id,form_id,set_approved,$target){var data={action:"gv_update_approved",entry_id:entry_id,form_id:form_id,approved:set_approved,nonce:gvApproval.nonce};return $.post(gvApproval.ajaxurl,data,function(response){response&&(self.response=$.parseJSON(response),"0"!==self.response.status?$target.attr("data-approved-status","Approved").prop("title",gvApproval.text.disapprove_title).text(gvApproval.text.label_disapprove).addClass(self.css_classes.approved):$target.attr("data-approved-status","0").prop("title",gvApproval.text.approve_title).text(gvApproval.text.label_approve).removeClass(self.css_classes.approved),$target.removeClass(self.css_classes.loading)),self.debug&&console.log("update_approval",{data:data,response:response})}),!0}}(jQuery);